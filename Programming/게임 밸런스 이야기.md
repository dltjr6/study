# 게임 밸런스 이야기

## 1 게임 개발의 구조

- 게임 월드는 크게 감각적 월드와 수학적 월드로 나뉜다.

  - 감각적 월드:  그래픽, 소리 등 플레이어가 감각기관을 통해 느낄 수 있는 부분

    1. 설정 : 창조자가 개체를 정의한 것, 이미지, 소리, 색깔 ,느낌으로 형상화
       - 이름은 적절한가?
       - 어떤 색과 느낌인가?
       - 어떤 기술 혹은 무기, 방어구를 사용하는가?
       - 어떤 옷을 입고 있는가?
       - 덩치는 어느 정도인가?
       - 참조 이미지를 넣을 것
    2. 시나리오 : 세계관과 설정의 흐름(MMORPG 기준)
       - 플레이어는 주인공이 될 수 없다. 대부분 조력자, 왜냐하면 수많은 플레이어가 참여하는 시나리오기 때문에
       - 역사가적인 지식과 관점 필요, 연대기
       - 플레이어는 관찰자, 조력자들로 NPC들을 마주함
       - 대륙 레벨 > 필드 레벨 > 지역 레벨(던전 등) 으로 순차  설계
    3. 세계관 : 세계를 어떻게 보는지 나타낸다.  가상적인 세계 창조
       - 자신의 개인적인 감정을 배재해야 한다. 
       - 실제 세계의 역사와 진화과정 참고
       - 모순적인것도 함께 녹여 내라 (중세시대에 총 사용!?)

    ​

  - 수학적 월드: 게임 밸런스를 유지하기 위한 수학적 모드

  - 수학적 월드를 이루는 요소

    1. 캐릭터 설계 ( 능력치)
    2. .게임 시스템 설계 ( 게임의 구조를 디자인)
    3. 차트 설계 (게임에서 필요한 정보를 저장하고 표현)



- 게임창조자
  - 플레이어(보통 이익을 극대화하고 손해를 최소화 하려고 한다.) 는 반면 창조자는(게임 월드의 존속과 영속, 확장을 꾀하기 위해 노력한다.)


- 경험, 갈증, 기대
  - 갈증 : 플레이어의 게임 몰입을 유도한다. 따라서  창조자의 게임 패치 및 업그레이드는 그 갈증을 해소하는 방향으로 이루어 져야 한다. 
- 게임 경험에 대해
  - 기대감, 성취감 등 개인이 게임 플레이 시 다양한 경험을 얻을 수 있다.
- 게임 공식 
  -  재미 공식 = 가치있는 게임 요소 /전체 게임 요소 
  -  가치 있는 그래픽 + 가치 있는 수학적 모델 요소 / 그래픽 요소 + 수학적 모델 요소
  -  ???? 필자가 저 공식을 만든이유는 뭐임?
- 콘텐츠 배포 전략
  -  어떤 식으로 콘텐츠가 유저에게 배포할지를 결정해야 한다.  일명 콘텐츠 맵이라 한다.  보통 콘텐츠 맵의 열에는 레벨(1~MAX)가 적혀 있고 행에는 배포 되는 콘텐츠가 적혀 있다.
  -  콘텐츠 종류 (초기지급,아이템,액세서리, 던전, 월드성장, 생산 펫 등)
- 정액제 VS 부분 유료화
  - 정액제 게임은 일정 수준 이상의 콘텐츠가 확보 되기 전 까지는 절대 문을 열 수 없다. 이에 비해 부분 유료화는 정액제 게임보다는 콘텐츠의 양이 적어도 오픈이 가능하다.
  - 정액제 게임은 다른 정액제 게임과 상호 경쟁적인 관계이다. 하나의 정액제 게임을 하면서 다른 정액제 게임을 동시에 하는 플레이어는 적다. 그러나 부분 유료화 게임은 경우가 많다.
  - 정액제 게임은 재미 위주로 설계 되지만 부분 유료화 게임은 중독성 위주로 설계

### 1-1 게임 밸런스

- 재미 그리고 게임 밸런스
  - 게임을 논할 때 먼저 고려해야 하는 것은 재미이다.
  - 게임 밸런스는 재미가 없을 때 바꾸어야 한다.
  - 동일한 등가로 게임 밸런스를 맞추는 것보다는 상황에 따라서 우열이 드러나는 게임 밸런스가 좋다.(가위 바위 보)
  - 완전히 새로운 시스템으로 교체한 후에 게임 밸런스를 바꾸면 플레이어는 납득한다. 와우 처럼 스킬 게임 밸런스를 전부 수정하면 스킬트리 초기화를 시켜줌
  - 하루에 올라는 글자 수에 곱하기 200~500하면 동시 접속자 수?(필자의견)
- 게임 밸런스 붕괴 사례
  - 클래스 밸런스 붕괴(특정 캐릭터 선택)
  - 경제 밸런스 붕괴
  - 플레이 타임 예측 실패 ( 예상 플레이 타임 VS 플레이어 플레이 타임)
  - 갈팡지팡하는 게임 밸런스(밸런스의 실패로 인한 UX로 플레이어에게 각인 된 경우 지나친 밸런스 패치는 유저들의 원성을 삼)
  - 버려지는 게임 시스템 (내구도 때문에 아이템 사용 안함  등)
- 게임 시스템 간 밸런스
  - 게임이 방대해지면서 플레이어의 패턴이 다양해지고 그에 따라 순차적 혹스 병렬적으로 콘텐츠를 소비하기 시작한다. 즉 애써 만든 콘텐츠가 버려질 확률이 높아짐
    1. 병렬적 소모 방식
       - 무기,갑옷,신발 ,헬멧 등을 각기 다른 콘텐츠에서만 얻을 수 있다. 즉 무기는 전장, 갑옷은 레이드 등 
    2. 직렬적 소모 방식
       - 콘텐츠를 소모 할 때 단계별로 차례로 소모
       - 매직 < 레어 < 전설 < 신화  등
       - 생산 < 레이드 < 전장 < 길드(최종콘텐츠 모든 보상 가능 등)
- 게임이론
  - 가위바위보 이론 
  - 죄수의 딜레마
- 베이스 아이템과 옵션의 관계
  - 베이스 아이템과 옵션의 불일치 : 개발 편함, 완전 랜덤으로 인해 쓰레기 효과 아이템이 상당 수 발생 , 아이템 보상을 다수 줘도 통계적으로 괜찮음
  - 옵션의 일치 : 플레이어가 전리품을 얻게 되면 자신이 사용 할 수 있는 적절한 수준 이상의 아이템만 얻게 됨
- 쓰레기의 미학
  - 불필요한 옵션을 가진 아이템을 활용해 다양한 게임 시스템 설계가 가능하다.
  - 미례 예측이 가능함, 처음에는 불필요한 스텟이라 쓰레기로 여겼는데 추가 패치로 필수아이템이 될 수도 있다. 따라서 플레이어들이 쓰레기를 재테크 할 수도 있다.
- 치명 최강의 법칙
  - 잘못된 옵션 설계로 치명타가  가장 효율이 좋은 옵션이 되는 현실
- 기능과 미학의 조화
  - 기능성과 미학의 밸런스가 중요, 너무 그래픽 요소를 중시하면 눈에 피로도 증가



###  1-2 알아두면 좋을 간단한 게임 수학

- DPS 체계와 게임 밸런스

  - 체력 = 시간 * 초당 데미지  
  - 시간 = 체력 / 초당 데미지
  - 초당 데미지  =  체력 / 시간 
  - EX ) 체력이 1000 / 초당데미지 100  VS 체력이 500 /초당 데미지 200  누가 이길까?
    - 5초 VS 5초 둘다 5초가 걸리기 때문에 '등가' 즉 무승부,

- 평균, 밸런스의 힘

  - 밸런스의 기준을 평균을 잡는게 좋다.

    - 50% 100의 데미지 10% 100의 데미지를 주면 60(기대값)의 데미지를 주는 스킬이다.

    - 1번 스킬은 1초 동안 적을 기절 하고 50데미지 VS 2번 스킬은 100의 데미지

      -  알 수 없다. (기절 시 플레이어가 행할 수 있는 변수가 많기 때문에)

        ​

  ​

### 1-3 게임 경제학

-  통계적 분석이 중요
  1. 오늘 하루 게임의 총 통화 보유랑
  2. 오늘 하루 게임에서의 총 통화 순증감량
  3. 각 클레스별 총 통화 보유량
  4. 각 레벨별 총 통화 보유랑
  5. 각 레벨별 각 클레스별 총 통화 보유량
  6. 각 레벨별 각 클래스별 총 통화 순증감량
  7. 개인별 통화 증감량
  8. 개인별 통화 총 보유량
  9. 가장 부유한 100인의 총통화 보유량
  10. 가장 부유한 100인의 총통화 증감량
  11. 오늘 하루 게임 시스템별 총 통화 유입 - 유출 량
-  게임 시스템으로 얻는것
  1. 사냥으로 재화 얻음
  2. 강화합성으로 재화 잃음
  3. 전투로 재화 소모
  4. NPC에서 재화 소모
  5. NPC에서 재화 이익(전리품 판매 등)
-  게임 경제가 안정화 되기 위해서는 대량으로 게임 머니를 소모할 좋은 시스템들이 있어야 한다. 
  1. 디아블로3 대량 게임 머니 소모 방법 없어 재화가 쌓임
-  총통화량에서 중요한 부분은 통화를 일정 수준으로 유지시키는 것





## 2. 게임 시스템 설계

### 2-1 몬스터 능력치 설계

- 몬스터의 공격력  
  - DPS = 캐릭터의 평균 체력 / 전투 시간 * (1-캐릭터 방어률) * 보정 팩터
    1.  10초 만에 캐릭터(체력 1400 방어률 0.3)가 죽어야 할 경우 몬스터 데미지는?
       -  DPS = 1500 / 10 * (1-0.3) =  200

- 몬스터의 체력
  - 체력 = 시간 * 초당공격력
    1.  캐릭터의 공격력이 100이고 전투시간이 10초, 몬스터의 방어률이 0.1이라면? 몬스터의 체력은?
       - 몬스터 체력 = 100*(1-0.1) * 100 = 900

- 강화된 몹 설계 
  - 개체의 세기 = 체력 * 공격력
  - 즉 하나의 개체가 6배 새 진다는 것은 루트6  만큼 증가시키면 된다.
    - 체력 100 공격력 10인 몬스터를 6배 강하게 만들려면  100 * 루트 6 , 10 *루트 6

- 보스 설계
  - 보스 설계는 힐러의 유무를 고려해야함, 힐러가 있으면 총 파티원의 체력이 증가하기 때문
  - 보스몬스터의 공격력 = 총파티원의 체력 + 파티의 치유능력(보호막 힐 등) /전투시간 * (1-방어확률)

- 몬스터 스킬 밸런스
  - 몬스터 공격력 DPS = 자동 공격 DPS + 스킬 DPS
  - 몬스터 공격력 = 자동공격 DPS * 공격 주기
  - 스킬 공격력 = 스킬 DPS * 공격 주기
  - 스킬타입 혹은 자동공격타입에 나눠 4:6 혹은 5:5 등으로 설계하면 좋다.

- 몬스터 인공지능 설계
  - 평화 시 인공지능
    - 위치고수, 배회, 순찰 , 호위 등
  - 전투 시 인공지능

- 인공지능 상태(FSM)
  - 전투대기 
  - 적 추적
  - 스킬 캐스팅
  - 도움 접근
  - 도움 스킬 사용
  - 도망
  - 사망
  - 스폰 대기

- 복합 인공지능 설계
  - 몬스터도 파티플레이를 할 수 있다. 따라서 요청 입력의 선후 값의 순서가 중요하다.
  - FIFO 큐 (First In - First Out 큐)
    - 처음 들어 온 것이 처음으로 처리된다. 이는 가장 처음 들어온 것을 순서대로 처리해 나간다는 것
  - LIFO 큐 (Last in - First Out 큐)
    - 가장 최신의 것을 가장 처음으로 처리한다. 이는 가장 최신한 것을 우선으로 처리함
  - Weighted 큐 
    -  가장 중요한 것을 가장 우선으로 처리 (중요도에 따라)

- 헤이트설계(어그로)

  - 몬스터가 다수의 적을 상대하고 있을 때 그들 중에 누구를 공격 할까?  그 판단을 설계하는것 , 일종의 어그로 설계
  - 유니크 개체 인덱스 : 누가 공격을 했는지 기술하기 위한 내부 서버 인덱스 체계 , NPC ,PC 펫 , 소환물, 전투 가능한 개체 총 망라
  - 헤이트(어그로) 량 : 얼마나 적대적인 행위를 하는지 기입
  - 최근 공격시간 : 최근 언제 공격했는지를 기입

  ​

### 2-2 플레이타임 설계

- 플레이타임 설계는 전체 게임을 플레이어에게 보여줄 때 어느 정도의 시간을 보여줄지를 결정하는 데 큰 영향을 미치는 중요한 요소이다. 

- 변수 예시

  - Tt  : 총플레이타임
  - Tm : 몬스터를 사냥할 때 겪은 평균 플레이 타임 (스킬 없이)
  - Ts : 몬스터를 사냥할 때 겪은 평균 플레이 타임(스킬 사용)
  - Tpk : 플레이어들이 서로 PVP 를 할 때 겪는 플레이타임
  - Tq : 퀘스트 시 플레이타임
  - Qk : 퀘스트 당 잡는 몹 마릿 수
  - Mn : 몬스터 이름 변종의 수
  - Mt : 텍스쳐 변종의 수
  - Qr : 플레이타임의  퀘스트의 비율
  - Ut : 전 월드 동시 접속자의 수
  - Um : 하나의 몬스터를 동시에 잡는 숫자
  - Mr : 몬스터의 시야거리
  - Ur : 유저 시야거리
  - Ar : 영역의 넓이
  - At : 총 넓이

- 예시 

  - 하루에 2시간 플레이 해서 3달 동안 즐길만한 게임을 만들려한다.
  - 2 (시간)* 3 (달)*30(일) = 180(시간)  = 648,000(초)
  - 몬스터 종류 산출법 , 1마리 몬스터 잡는데 10초 걸린다 가정, 몬스터를 잡는데 50% 소모
  - 총시간 / 몬스터종류 (Tt/Ts/Qk) *몬스터잡기 소모 비율

  ​

### 2-3 맵설계

- 공간 구성 구분

  - 플레이 가능 필드 공간

  - 플레이 불가능 공간

  - 마을

  - 던전

    ​

### 2-4 캐릭터설계

- 레벨구간
  1. 연습구간 : 튜토리얼 구간 , 게임의 기본적인 성격과 조작법,세계관을 익힘
  2. 모험구간 : 일반적인 라이트 레벨 플레이를 위한 구간, 게임 시스템을 빠르게 익히며 플레이하는 것이 필요
  3. 투쟁구간 : 최고레벨에 가까운 숙련된 플레이어를 위한 구간, 성장을 위해 필요한 요소를 얻기 위해서는 상당한 노력이 필요. 레이드, pvp 등 존재, 레벨업 힘듬
- 어트리뷰트(스텟) 설정
  1. 힘 : 물리적인 능력과 공격력에 연관
  2. 민첩 : 몸의 빠르기, 반사신경 등 회피, 명중에 연관
  3. 지능 : 이해 능력 , 마법에 연관
  4. 인내 : 생명, 체력에 연관
- 펙터 설정 : 팩터가 다양하면 통제가 어려운 대신 재밌다. 
  1. 물리공격력 = 힘 * 0.1
  2. 방어도 = 민첩 * 3
     - 방어률 = 방어도 / 2000
     - 투과율 = 1- 방어률
  3.  마법공격력 = 지능 * 0.1
  4. 체력 = 인내 * 20



### 2-5 갑옷 설정

- 갑옷은 일반적으로 Light , Medium, Heavy 로 나누어진다.

